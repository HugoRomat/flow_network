<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>confluent vs powergraph</title>

<!--   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="https://cdn.rawgit.com/tgdwyer/WebCola/master/WebCola/cola.min.js"></script>
  <script src="https://d3js.org/topojson.v1.min.js"></script>
 -->

  <!-- <script src="lib/CSS3DRenderer.js"></script>
  <script src="lib/OrbitControls.js"></script> -->
  <script src="../static/lib/d3.v4.js"></script>




  <!-- <script src="https://d3js.org/d3.geo.projection.v0.min.js"></script> -->
	<script src="../dist/main.entry.js"></script>
    <style>
        div{
            float: left;
            margin-right: 5px;
        }
      html { width: 100%; height:100%; /*overflow:hidden;*/ }
      body{
        width: 100%;
        height:100%;
        font-family: Lato;
        margin: 0;
        padding: 0;
          /*background-color: black;*/
      }


    </style>


</head>
<body>


	<div id="visFrame"></div>

	<script>

        // console.log(yo)
    var color_scale_delay_dep = d3.scaleLinear()
                   .domain([0, 23])
                   .range([2,10])

    var freq = d3.scaleLinear()
                   .domain([0, 28])
                   .range([0.1,0.8])
                //    .interpolate(d3.interpolateHcl);

    // var proj = d3.geo.miller()
    //                 .scale(328)
    //                 .translate([-50,-10]);

    d3.json("../static/data/starWars.json", function(json) {

            //   json = {
            // "nodes":[
            //   {"name":"edge_base", "id":100, "X": 100,"Y":0},
            //   {"name":"edge_base", "id":101, "X": -600,"Y":0}
            //   // {"name":"edge_base", "id":102, "X": 600,"Y":0},
            //   // {"name":"edge_base", "id":103, "X": -600,"Y":0},
            //   // {"name":"edge_base", "id":104, "X": 600,"Y":0},
            //   // {"name":"edge_base", "id":105, "X": -600,"Y":0}
              
            //   // {"name":"edge_base", "id":103, "X": -600,"Y":50},
            //   // {"name":"edge_base", "id":104, "X": -000,"Y":50}
              
            //   // {"name":"edge_base", "id":0, "X": -600,"Y":150},
            //   // {"name":"edge_base", "id":1, "X": -400,"Y":150},
            //   // {"name":"edge_base", "id":0, "X": -600,"Y":200},
            //   // {"name":"edge_base", "id":1, "X": -400,"Y":200},
        
            //   // {"name":"edge_base", "id":0, "X": -600,"Y":250},
            //   // {"name":"edge_base", "id":1, "X": -400,"Y":250},
            //   // {"name":"edge_base", "id":0, "X": -600,"Y":300},
            //   // {"name":"edge_base", "id":1, "X": -400,"Y":300}
            // ],
            // "links":[
            //   {"source":101, "target":100, "freq":2, "sp":4, "temp": [0], "width": 10, "couleur": "black", "textu": "images/circle_texture.png"}
            //   // {"source":101, "target":102, "freq":2, "sp":4, "temp": [0], "width": 10, "couleur": "black", "textu": "images/circle_texture.png"},
            //   // {"source":101, "target":103, "freq":2, "sp":4, "temp": [0], "width": 10, "couleur": "black", "textu": "images/circle_texture.png"},
            //   // {"source":101, "target":104, "freq":2, "sp":4, "temp": [0], "width": 10, "couleur": "black", "textu": "images/circle_texture.png"},
            //   // {"source":101, "target":105, "freq":2, "sp":4, "temp": [0], "width": 10, "couleur": "black", "textu": "images/circle_texture.png"}
            //   // {"source":103, "target":104, "freq":5, "sp":10, "temp": [0], "width": 10, "couleur": "black", "textu": "images/rectangle_texture.png"}
              
            //   // {"source":4, "target":5, "freq":0.2, "sp" : 1, "temp": [0, 0.2]},
            //   // {"source":6, "target":7, "freq":0.2, "sp" : 4, "temp": [0, 0.2]},
              
            //   // {"source":8, "target":9, "freq":0.3, "sp" : 1, "temp": [0]},
            //   // {"source":10, "target":11, "freq":0.6, "sp" : 1, "temp": [0]}
            // ]}
        
            var app = flownet.force("#visFrame", 800 ,800, "grey",0)
                  .nodes(json.nodes)
                  .links(json.links)
                  .layout("linkDistance", 500)
                  .create_layout()
                  // .numberSegmentation("numberSpacedPoints", function (d, i){
                  //     var X1 = d.source.X;
                  //     var X2 = d.target.X;
        
                  //     var Y1 = d.source.Y;
                  //     var Y2 = d.target.Y;
        
                  //     var dist = get_distance(X1, Y1, X2, Y2)
                  //     console.log(dist)
        
                  //     return 2;
                  //     // var distance = get_distance();
        
                  // })
        
                  .tracks("count", 1 )
                  
                  .create_WEBGL_element()
                  .zoom(true)
                  .controls(true)
        
                  .link_properties("curvature", 8)
                  .link_properties("color", "#b5b5b5")
                  .link_properties("size", function(d, i) {return color_scale_delay_dep(d.value)/4; })
                   .link_properties("opacity", 0.2) //function(d, i) {return color_scale_delay_dep(d.value); })
                  //
                  .node_properties("color", function(d, i) {return d.colour; })
                  .node_properties("size", function (d) { return 2*Math.sqrt(d.value) + 2; })
                  // .node_properties("label", function(d, i) {return d.name; })
                  // //.node_properties("label", function(d, i) {return d.city; })
                  // .node_properties("label", function(d, i) {return d.label; })
                  // .node_properties("size", 5)
                  // .node_properties("x", function(d, i) {return 50; })
                  // .node_properties("y", function(d, i) {return (100 * i);  })
                  //.node_properties("image", function(d, i) {return "images/" + d.label + ".jpg"; })
                  .node_properties("x", function(d, i) {return d.X; })
                  .node_properties("y", function(d, i) {return -d.Y;  })
                  // var coordinates = my_projection([nodes[i].attr('long'),nodes[i].attr('lat')]);
                  // // .particles("wiggling",5)
        
                  // .node_properties("x", function(d, i) {console.log(proj([d.lon,d.lat])[0]);return proj([d.lon,d.lat])[0]; })
                  // .node_properties("y", function(d, i) {console.log(proj([d.lon,d.lat])[1]);return - proj([d.lon,d.lat])[1];  })
        
                  // .link_properties("color", "steelblue")
                  // .link_properties("size", 10)
                  // .link_properties("opacity", 0.2)
                  // .link_properties("size", 3)
        
        
                  .tracks("opacity", 0.0)
                  .tracks("color", "#000000")
        
                  // .node_properties("size", 10)
                  // .node_properties("color", "#d8f0ff")
                  //.node_properties("image", function(d, i) {return "images/particle3.png"; })
        
        
                  .node_properties("label", function(d, i) { if(d.colour !="#808080") {return d.name} else{return} })
                  .node_properties("label_size", 10)
                  .node_properties("label_x", 15)
                  .node_properties("label_y", -5)
                  .node_properties("label_color", "grey")
                  //
                  .particles("color", "black")
                  .particles("size", function(d, i) {return color_scale_delay_dep(d.value); })
                  // .particles("color", function(d, i) {return d.couleur; })
        
                  // .particles("wiggling_0", 1.0)
                  // .particles("wiggling_1", 0.0)
                  // .particles("wiggling_2", 1.0)
                  // .particles("wiggling_3", 0.0)
                  // .particles("wiggling_4", 1.0)
                  // .particles("wiggling_5", 0.0)
                  // .particles("wiggling_16", 3.0)
        
                  // .particles("wiggling", 1.0)
                  // .particles("color", "green", 2)
                  // .particles("size", 5, 2)
        
                  // .particles("color", "black", 0.2)
        
                  //.particles("color", "red", 15)
                  // .particles("color", "black", 0.1)
                  // .particles("color", "red", 0.2)
                  // .particles("color", "blue", 0.3)
                  // .particles("color", "red", 0.4)
                  // .particles("color", "black", 0.5)
                  // .particles("color", "red", 0.6)
                  // .particles("color", "blue", 0.7)
                  // .particles("color", "black", 0.8)
                  // .particles("color", "blue", 0.85)
                  // .particles("color", "red", 0.9)
                  // .particles("color", "blue", 0.95)
                  // .particles("color", "blue", 16)
                  // .particles("color", "black", 17)
                  // .particles("color", "red", 18)
                  // .particles("color", "blue", 19)
                  // .particles("color", "black", 20)
        
                  // .particles("opacity", 0.1, 9)
                  // .particles("opacity", 0.2, 8)
                  // .particles("opacity", 0.2, 10)
                  // .particles("opacity", 0.2, 7)
                  // .particles("opacity", 0.1, 5)
                  // .particles("speed", 10, 0.5)
                  // .particles("speed", 3, 0.6)
                  // .particles("speed", 3, 0.7)
                  // .particles("speed", 3, 0.8)
                  // .particles("speed", 3, 0.9)
                  //.particles("color_", "green")
                  //  .particles("speed", function(d, i) {return d.sp; })
                  // .particles("speed", 3, 10)
                  // .particles("speed", 3, 11)
                  // .particles("speed", 3, 12)
                  // .particles("speed", 3, 13)
                  // .particles("speed", 3, 14)
                  // .particles("speed", 3, 15)
                  // .particles("speed", 3, 16)
                  // .particles("speed", 3, 17)
                  // .particles("speed", 3, 18)
                  // .particles("speed", 3, 19)
                  // .particles("speed", 3, 20)
        
                // .particles("size", 10, 10)
                // .particles("size", 10, 11)
                // .particles("size", 10, 12)
                // .particles("size", 10, 13)
                // .particles("size", 10, 14)
                // .particles("size", 10, 15)
                // .particles("size", 10, 16)
                // .particles("size", 10, 17)
                // .particles("size", 10, 18)
                // .particles("size", 10, 19)
                // .particles("size", 10, 20)
        
                  // .particles("size_1", 10)
                  // .particles("size_3", 10)
                  // .particles("size_5", 10)
                  // .particles("size_7", 10)
                  // .particles("size_9", 10)
                  // .particles("size_11", 50)
                  // .particles("size_13", 50)
                  // .particles("size_15", 50)
                  // .particles("size_18", 10)
        
        
                  // .particles("opacity_0", 0.0)
                  // .particles("opacity_1", 0.5)
                  // .particles("opacity_2", 0)
                  // .particles("opacity_3", 0)
                  // .particles("opacity_4", 0)
                  // .particles("opacity_5", 1)
                  // .particles("opacity_6", 1)
                  // .particles("opacity_7", 0.5)
                  // .particles("opacity_8", 0.0)
                  // .particles("opacity_9", 0.5)
                  // .particles("opacity_10", 1)
                  // .particles("opacity_11", 0.5)
                  // .particles("opacity_12", 0.0)
                  // .particles("opacity_13", 0.5)
                  // .particles("opacity_14", 1)
                  // .particles("opacity_15", 0.5)
                  // .particles("opacity_16", 0.0)
                  // .particles("opacity_17", 0.5)
                  // .particles("opacity_18", 1.0)
        
        
                  //.particles("color", '#d53e4f')
                  // .particles("size", function(d, i) {return d.size_message; })
                  //.particles("frequency", 2)
                  //.particles("spatial_distribution", function(d, i) {return d.spatial; })
                  //.particles("spatial_distribution", [0,])
                  //.particles("pattern", function(d, i) {return d.temp; })
                  //.particles("speed", function(d, i) {return d.speed; })
                  //.particles("speed", 1)//function(d, i) {return d.fre; })
        
                  //.particles("frequency", 1)
                  //.particles("pattern",  [ 0.0, 0.3, 0.6 ])
                  //.particles("pattern",  [ 0.0, 0.8])
                  //.particles("spatial_distribution", [0])
                  
                  //.particles("frequency", function(d, i) {return d.freq; })
                  //.particles("speed", 1)
                  //.particles("speed", 10, 14)
                  //.particles("pattern",  function(d, i) {return d.temp; })
                  //.particles("pattern", [0.0])
                  //.on("end", function() { alert("PROUT"); })
        
                  // ATTENTION CHANGEMENT d'OPACITY due AU FADDING
                  // .particles("opacity", 0.1, 0.4)
                  // .particles("speed", 1, 0)
                  // .particles("speed", 8, 0.1)
                  // .particles("speed", 2, 0.1)
                  // .particles("speed", 1, 0.2)
        
                  // .particles("speed", 2, 0.0)
                  // .particles("speed", 1, 0.25)
        
                  // .particles("speed", 4, 0.5)
                  
                  // .particles("speed", 10, 0.2)
                  // // .particles("speed", 10, 0.6)
                  // // .particles("speed", 10, 0.7)
                  // .particles("speed", 10, 0.9)
                  // // .particles("speed", 1 , 0.25)
                  // // .particles("color", "white" , 0.2)
        
                  // // .particles("color", "green" , 0.5)
                  // // .particles("color", "red" , 0.55)
                  // .particles("color", "red" , 0.6)
                  // .particles("color", "yellow" , 0.8)
        //           .particles("opacity", 1, 0)
        //           // .particles("speed", 1, 0.75)
        // // 
                  // .particles("opacity", 0, 0)
        //           .particles("opacity", 1, 0.3)
        //           // .particles("opacity", 0, 0.05)
        //           .particles("opacity", 0, 0.95)
                  
                  // .particles("speed", 11, 0.1)
                  // .particles("speed", 10, 0.2)
                  // .particles("speed", 9, 0.3)
                  // .particles("speed", 8, 0.4)
                  
                  // .particles("speed", 12, 0.6)
                  // .particles("speed", 5, 0.7)
                  // .particles("speed", 10, 0.8)
                  .particles("texture", "../static/images/rectangle_texture.png")
                  //.particles("texture", function(d, i) {return d.textu; })
        
                  // .particles("pattern", function(d, i) {return [0, 0, 0, 0.6]; })
                 
                  // // .particles("track", [1,0,2,  0])
                  .particles("frequency", function(d, i) {return freq(d.value); })
                  // // .particles("speed", function(d, i) {return 3; })
        // 
                  // .particles("speed", 2, 0.5)
        
                  // .particles("speed", 3, 0.8)
                  // .start_particle_delay(200000)
                  .start(0)
                  // .startAPIparticule_oneitem(0);
        
                  
                  // app.sparkiz.draw_map(proj, 'data/worldID.json');
        
        
        
            });
        /* Get the distance between two points */
    function get_distance(x1, y1, x2, y2){
        var a = x1 - x2
        var b = y1 - y2

        var c = Math.sqrt( a*a + b*b );
        //console.log(c)
        return c;
    }


	</script>


</body>
</html>
